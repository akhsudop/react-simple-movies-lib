import{u as v,r as o,a as x,b as j,j as e,L as n,O as m}from"./index-df4f5ec0.js";import{I as u}from"./IdContext-18009005.js";const g="394f7f7b9c091369c76717b88c1e71f3",y=()=>{const{movieId:r}=v(),[s,c]=o.useState({}),a=x(),l=j(),d=async()=>{try{const t=await(await fetch(`https://api.themoviedb.org/3/movie/${r}?api_key=${g}&language=en-US`)).json();c({title:t.title,overview:t.overview,popularity:t.popularity,genres:t.genres.map(({name:p})=>p+" "),poster:t.poster_path,year:new Date(t.release_date).getFullYear()})}catch(i){console.error(i)}};o.useEffect(()=>{d()},[r]);const h=()=>{var i;a.pathname.includes("cast")||a.pathname.includes("reviews")?history.go(-2):l(((i=a.state)==null?void 0:i.from)??"/movies")};return e.jsxs("main",{children:[e.jsx("button",{onClick:h,children:"Go Back"}),e.jsxs("div",{children:[s.poster?e.jsx("img",{src:`https://image.tmdb.org/t/p/w500${s.poster}`,alt:"movie poster",style:{width:365,height:520}}):e.jsx("p",{children:"Sorry, no poster here.."}),e.jsxs("div",{children:[e.jsxs("h2",{children:[s.title," (",s.year,")"]}),e.jsx("h4",{children:"Overview"}),e.jsx("p",{children:s.overview}),e.jsx("h4",{children:"Genres"}),e.jsx("p",{children:s.genres})]})]}),e.jsx("h4",{children:"Additional information"}),e.jsxs("ul",{children:[e.jsx(n,{to:"cast",children:e.jsx("li",{children:"Cast"})}),e.jsx(n,{to:"reviews",children:e.jsx("li",{children:"Reviews"})})]}),e.jsx(u.Provider,{value:{id:r},children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading subpage..."}),children:e.jsx(m,{})})})]})};export{y as default};
