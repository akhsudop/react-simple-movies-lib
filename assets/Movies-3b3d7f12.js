import{s as d,j as s,r,c as v,a as S}from"./index-df4f5ec0.js";import{M as j}from"./MoviesList-ce9d39bd.js";const b=d.input`
  width: 350px;
  margin-right: 20px;
`,g=({onSubmit:a})=>s.jsxs("form",{onSubmit:o=>a(o),children:[s.jsx(b,{className:"input",name:"input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies..."}),s.jsx("button",{children:"Search"})]}),y="394f7f7b9c091369c76717b88c1e71f3",E=()=>{const[a,o]=r.useState([]);r.useState("");const[n,m]=v(),c=n.get("name")??"",i=S(),u=async t=>{try{const l=(await(await fetch(`https://api.themoviedb.org/3/search/movie?api_key=${y}&query=${t}&include_adult=false&language=en-US`)).json()).results.map(({title:f,id:x})=>({title:f,id:x}));o(l)}catch(e){console.error(e)}};r.useEffect(()=>{if(c){const t=c.split(" ").join("%20");u(t)}},[n]);const h=t=>{t.preventDefault();const e=t.currentTarget.elements.input.value.trim();m(e!==""?{name:e}:{}),history.pushState({...i,search:`name=${e}`}," ")};return s.jsxs("main",{children:[s.jsx(g,{onSubmit:h}),n&&s.jsx(j,{movies:a,location:i})]})};export{E as default};
